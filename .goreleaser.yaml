version: 2

builds:
  - id: dunebot
    binary: temporal-dunebot-worker
    env:
      - CGO_ENABLED=0
    main: ./worker/dunebot/main.go
    goos:
      - linux
      - darwin
  - id: engine-ci
    binary: temporal-engine-ci-worker
    env:
      - CGO_ENABLED=0
    main: ./worker/engine-ci/main.go
    goos:
      - linux
      - darwin

archives:
  - id: dunebot
    builds: [dunebot]
    formats: [binary]
    name_template: >-
      {{ .Binary }}_
      {{- .Os }}_
      {{- .Arch }}
      {{- if .Arm }}v{{ .Arm }}{{ end }}

  - id: engine-ci
    builds: [engine-ci]
    formats: [binary]
    name_template: >-
      {{ .Binary }}_
      {{- .Os }}_
      {{- .Arch }}
      {{- if .Arm }}v{{ .Arm }}{{ end }}     